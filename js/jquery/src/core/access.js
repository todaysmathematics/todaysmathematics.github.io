define(["../core","../core/toType","../var/isFunction"],function(n,l,r){var e=function(c,o,i,t,u,f,a){var v=0,d=c.length,s=null==i;if("object"===l(i)){u=!0;for(v in i)e(c,o,v,i[v],!0,f,a)}else if(void 0!==t&&(u=!0,r(t)||(a=!0),s&&(a?(o.call(c,t),o=null):(s=o,o=function(l,r,e){return s.call(n(l),e)})),o))for(;v<d;v++)o(c[v],i,a?t:t.call(c[v],v,o(c[v],i)));return u?c:s?o.call(c):d?o(c[0],i):f};return e});