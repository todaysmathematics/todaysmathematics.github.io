define(["./core","./core/toType","./var/isFunction","./var/rnothtmlwhite"],function(n,t,r,e){function i(t){var r={};return n.each(t.match(e)||[],function(n,t){r[t]=!0}),r}return n.Callbacks=function(e){e="string"==typeof e?i(e):n.extend({},e);var u,o,c,f,h=[],s=[],a=-1,l=function(){for(f=f||e.once,c=u=!0;s.length;a=-1)for(o=s.shift();++a<h.length;)!1===h[a].apply(o[0],o[1])&&e.stopOnFalse&&(a=h.length,o=!1);e.memory||(o=!1),u=!1,f&&(h=o?[]:"")},p={add:function(){return h&&(o&&!u&&(a=h.length-1,s.push(o)),function i(u){n.each(u,function(n,u){r(u)?e.unique&&p.has(u)||h.push(u):u&&u.length&&"string"!==t(u)&&i(u)})}(arguments),o&&!u&&l()),this},remove:function(){return n.each(arguments,function(t,r){for(var e;(e=n.inArray(r,h,e))>-1;)h.splice(e,1),e<=a&&a--}),this},has:function(t){return t?n.inArray(t,h)>-1:h.length>0},empty:function(){return h&&(h=[]),this},disable:function(){return f=s=[],h=o="",this},disabled:function(){return!h},lock:function(){return f=s=[],o||u||(h=o=""),this},locked:function(){return!!f},fireWith:function(n,t){return f||(t=t||[],t=[n,t.slice?t.slice():t],s.push(t),u||l()),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!c}};return p},n});