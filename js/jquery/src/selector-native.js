define(["./core","./var/document","./var/documentElement","./var/hasOwn","./var/indexOf"],function(e,n,t,o,r){function c(t,o){if(t===o)return i=!0,0;var c=!t.compareDocumentPosition-!o.compareDocumentPosition;return c||(c=(t.ownerDocument||t)===(o.ownerDocument||o)?t.compareDocumentPosition(o):1,1&c?t===n||t.ownerDocument===n&&e.contains(n,t)?-1:o===n||o.ownerDocument===n&&e.contains(n,o)?1:l?r.call(l,t)-r.call(l,o):0:4&c?-1:1)}function u(e){var n,t=[],o=0,r=0;if(i=!1,l=!s&&e.slice(0),e.sort(c),i){for(;n=e[r++];)n===e[r]&&(o=t.push(r));for(;o--;)e.splice(t[o],1)}return l=null,e}function a(e){return(e+"").replace(f,m)}var i,l,s=e.expando.split("").sort(c).join("")===e.expando,d=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.msMatchesSelector,f=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,m=function(e,n){return n?"\0"===e?"ï¿½":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e};e.extend({uniqueSort:u,unique:u,escapeSelector:a,find:function(t,o,r,c){var u,a,i=0;if(r=r||[],o=o||n,!t||"string"!=typeof t)return r;if(1!==(a=o.nodeType)&&9!==a)return[];if(c)for(;u=c[i++];)e.find.matchesSelector(u,t)&&r.push(u);else e.merge(r,o.querySelectorAll(t));return r},text:function(n){var t,o="",r=0,c=n.nodeType;if(c){if(1===c||9===c||11===c)return n.textContent;if(3===c||4===c)return n.nodeValue}else for(;t=n[r++];)o+=e.text(t);return o},contains:function(e,n){var t=9===e.nodeType?e.documentElement:e,o=n&&n.parentNode;return e===o||!(!o||1!==o.nodeType||!t.contains(o))},isXMLDoc:function(e){var n=e&&(e.ownerDocument||e).documentElement;return!!n&&"HTML"!==n.nodeName},expr:{attrHandle:{},match:{bool:new RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:/^[\x20\t\r\n\f]*[>+~]/}}}),e.extend(e.find,{matches:function(n,t){return e.find(n,null,null,t)},matchesSelector:function(e,n){return d.call(e,n)},attr:function(n,t){var r=e.expr.attrHandle[t.toLowerCase()],c=r&&o.call(e.expr.attrHandle,t.toLowerCase())?r(n,t,e.isXMLDoc(n)):void 0;return void 0!==c?c:n.getAttribute(t)}})});